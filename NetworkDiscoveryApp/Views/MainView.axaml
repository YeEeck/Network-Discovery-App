<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:NetworkDiscoveryApp.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="NetworkDiscoveryApp.Views.MainView"
             x:DataType="vm:MainViewModel">
  <Design.DataContext>
    <!-- This only sets the DataContext for the previewer in an IDE,
         to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs) -->
    <vm:MainViewModel />
  </Design.DataContext>

	<Grid Margin="15">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!-- 控制面板 -->
		<Border Grid.Row="0" Padding="10" Background="#f0f0f0" CornerRadius="5">
			<StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
				<TextBlock Text="目标端口:" VerticalAlignment="Center" Margin="0,0,10,0"/>
				<TextBox x:Name="PortTextBox"
                         Text="9999"
                         Width="80"
                         Margin="0,0,20,0"
                         HorizontalAlignment="Left"/>

				<Button x:Name="DiscoverButton"
                        Content="开始发现设备"
                        Padding="10,5"
                        MinWidth="120"
                        Margin="0,0,15,0"/>

				<Button x:Name="ClearButton"
                        Content="清除结果"
                        Padding="10,5"
                        MinWidth="80"/>
			</StackPanel>
		</Border>

		<!-- 状态指示 -->
		<StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,15,0,5">
			<TextBlock Text="状态:" FontWeight="Bold" Margin="0,0,10,0"/>
			<TextBlock x:Name="StatusText" Text="就绪"/>
			<ProgressBar x:Name="ScanProgress"
                         IsIndeterminate="False"
                         Minimum="0" Maximum="100"
                         Width="150" Height="10"
                         Margin="15,0,0,0"
                         VerticalAlignment="Center"
                         />
		</StackPanel>

		<!-- 设备列表 -->
		<Border Grid.Row="2" BorderBrush="#cccccc" BorderThickness="1" CornerRadius="3" Margin="0,5">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="*"/>
				</Grid.RowDefinitions>

				<TextBlock Text="已发现设备:"
                           FontWeight="Bold"
                           Margin="5"
                           Foreground="#333"/>

				<DataGrid x:Name="DevicesDataGrid"
                          Grid.Row="1"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          HeadersVisibility="Column"
                          Background="White">
					<DataGrid.Columns>
						<DataGridTextColumn Header="IP地址"
                                            Binding="{Binding IpAddress}"
                                            Width="*"/>
						<DataGridTextColumn Header="发现时间"
                                            Binding="{Binding DiscoveryTime}"
                                            Width="*"/>
						<DataGridTextColumn Header="MAC地址"
                                            Binding="{Binding MacAddress}"
                                            Width="*"/>
						<DataGridTextColumn Header="状态"
                                            Binding="{Binding Status}"
                                            Width="Auto"/>
					</DataGrid.Columns>
				</DataGrid>
			</Grid>
		</Border>

		<!-- 日志输出 -->
		<Border Grid.Row="3" BorderBrush="#cccccc" BorderThickness="1" Margin="0,10,0,0">
			<TextBox x:Name="LogTextBox"
                     IsReadOnly="True"
                     AcceptsReturn="True"
                     FontFamily="Consolas"
                     Height="100"
                     VerticalAlignment="Bottom"
                     Background="#1a1a1a"
                     Foreground="#f0f0f0"
                     Padding="5"/>
		</Border>
	</Grid>
</UserControl>
